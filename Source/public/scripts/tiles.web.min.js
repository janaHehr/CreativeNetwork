/*!
 * Copyright 2013-2014 T. Klepzig
 * Released under the MIT license
 */
var getUniqueId=function(n){var t=(new Date).getTime();return t+=parseInt(Math.random()*100).toString(),undefined===n&&(n="uid-"),n+t},tilesWeb=function(n,t){var r=document.documentElement,f="ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0,i,e;r.className+=f?" touch":" no-touch";r.setAttribute("data-useragent",navigator.userAgent);i="mousedown";e="mouseup";n(function(){n(".navbar").each(function(){new o(n(this))})}),function(n){n.fn.tileProgress=function(t){function u(n){if((typeof n=="undefined"||n==null)&&(n=r),n.length===0)return null;var i=n,t=i.find(".value"),u=t.width(),f=t.offsetParent().width(),e=100*u/f;return parseInt(e)}function f(t,u){(typeof u=="undefined"||u==null)&&(u=r);setTimeout(function(){u.each(function(){var r=n(this),u=r.find(".value"),f=r.find(".bar-container");t<0?t=0:t>100&&(t=100);u.css("background-color","hsl("+i.hue+", "+t+"%, "+i.lightness+"%)");u.css("width",t+"%");f.attr("title",t)})},10)}var i={hue:182,lightness:60},r;return n.extend(i,t),r=this,this.each(function(){var t=n(this);if(t.find(".bar-container").length===0){var i=n("<div>").addClass("bar-container"),r=n("<div>").addClass("bar"),u=n("<div>").addClass("value");r.append(u);i.append(r);t.append(i);t.addClass("progress")}}),{getValue:function(){return u()},setValue:function(n){return f(n)}}}}(jQuery);var o=function(t){function y(t){var u=t.children("nav"),r=u.children("ul.overflow");n("#modalOverlay").css("display","block").one(i,{navbar:t},function(n){o(n.data.navbar)});t.hasClass("no-animation")?r.addClass("visible"):r.addClass("visible")}function o(t){var r=t.children("nav"),i=r.children("ul.overflow");n("#modalOverlay").css("display","none");t.hasClass("no-animation")?i.removeClass("visible"):i.removeClass("visible")}function s(n){var t=n.children("nav"),i=t.children("ul.overflow");n.hasClass("bottom")?i.css("bottom",t.outerHeight()-8):t.hasClass("sticky")?i.css("top",t.outerHeight()-8):i.css("top",t.offset().top+t.outerHeight()-8)}function a(t){var i=t.children("nav"),e=i.children("ul.sub"),r=i.children("ul.overflow"),u=i.children(".overflowButton"),o=i.children(".sub").width(),s=i.width(),h=(u.is(":visible")?u.outerWidth(!0):0)+i.children(".main").width(),f=s-(o+h+20);f<0?n(e.children("li").get().reverse()).each(function(){f<0&&(console.log("width",n(this).outerWidth(!0)),console.log("blubb new",f),n(this).attr("data-width",n(this).outerWidth(!0)),t.hasClass("bottom")?r.append(n(this)):r.prepend(n(this)),u.addClass("visible"),o=i.children(".sub").width(),s=i.width(),h=(u.is(":visible")?u.outerWidth(!0):0)+i.children(".main").width(),f=s-(o+h+20))}):r.children("li").length>0&&(t.hasClass("bottom")?f>=r.children("li:last-child").data("width")&&e.append(r.children("li:last-child").removeAttr("data-width")):f>=r.children("li:first-child").data("width")&&e.append(r.children("li:first-child").removeAttr("data-width")));u.toggleClass("visible",r.children("li").length>0)}var e,l,f;$navbar=typeof t=="object"?t:n(t);var r=$navbar.children("nav"),v=r.children("ul.main"),h=r.children("ul.sub"),c=$navbar.hasClass("bottom")?"above":"below";v.children("li").each(function(){if(n(this).children("ul.popupMenu").length===1){var t=new u(n(this).children("ul.popupMenu"),{triggerElement:n(this).find(".button, .button-s"),verticalPosition:c});n(this).find(".button, .button-s").on("click",{popup:t},function(n){n.data.popup.show()})}});h.children("li").each(function(){if(n(this).children("ul.popupMenu").length===1){var t=new u(n(this).children("ul.popupMenu"),{triggerElement:n(this).find(".button, .button-s"),verticalPosition:c,horizontalPosition:"right"});n(this).find(".button, .button-s").on("click",{popup:t},function(n){n.data.popup.show()})}});e=n("<ul>").addClass("overflow");r.append(e);l=n("<div class='overflowButton'><div><span><\/span><span><\/span><span><\/span>");h.before(l);f=n("<div>").addClass("sticky-placeholder");r.before(f);n(window).resize({navbar:$navbar,nav:r,overflow:e},function(n){var t=n.data.navbar,r=n.data.nav,i=n.data.overflow;s(t);i.hasClass("visible")&&o(t);a(t)});a($navbar);$navbar.hasClass("bottom")?(f.css({height:r.outerHeight()}),n(window).resize({nav:r,stickyPlaceholder:f},function(n){n.data.stickyPlaceholder.css({height:n.data.nav.outerHeight()})})):n(window).scroll({top:r.offset().top,navbar:$navbar,nav:r,overflow:e,stickyPlaceholder:f},function(t){var u=t.data.navbar,i=t.data.nav,f=t.data.overflow,r=t.data.stickyPlaceholder;n(window).scrollTop()>=t.data.top?i.hasClass("sticky")||(r.css({height:i.outerHeight()}),i.css({position:"fixed"}).addClass("sticky")):i.hasClass("sticky")&&(r.css({height:0}),i.css({position:"static"}).removeClass("sticky"));s(u)});s($navbar);$navbar.on(i,".overflowButton",function(){var t=n(this).closest(".navbar"),i=t.children("nav"),r=i.children("ul.overflow");r.hasClass("visible")?o(t):y(t)})},s=function(){function i(){var t=n(window).height(),i=n(window).width();n(".loading > div").css("top",t/2-n(".loading > div").outerHeight()/2);n(".loading > div").css("left",i/2-n(".loading > div").outerWidth()/2)}function r(){if(n(".loading").length===0){var t=n("<div>").addClass("loading");t.append(n("<div>").append(n("<div>").append(new Array(11).join("<span><\/span>"))).append(n("<div>").addClass("status")).append(n("<div>").addClass("subStatus")));n("body").append(t)}}function u(u,f){r();u!=t&&n(".loading .status").text(u);f!=t&&n(".loading .subStatus").text(f);i();n(".loading").addClass("visible")}function f(t){n(".loading .status").text(t)}function e(t){n(".loading .subStatus").text(t)}function o(){n(".loading").removeClass("visible");n(".loading .status").text("");n(".loading .subStatus").text("")}return n(window).resize(i),{show:u,updateStatus:f,updateSubStatus:e,hide:o}}(),h=function(){function u(){var t=n(window).height();n(".dialogOverlay > .dialog").each(function(){n(this).css("position")==="fixed"?n(this).css("top",t/2-n(this).outerHeight()/2):n(this).css("top","")})}function e(){if(n(t).length===0){var u=n("<div>").addClass("dialogOverlay").attr("id",r),e=n("<div>").addClass("dialog"),o=n("<section>"),s=n("<header>"),h=n("<div>").addClass("content");o.append(s).append(h);e.append(o);u.append(e);n("body").append(u);n(t).on(i,function(n){n.originalEvent.target.classList.contains("dialogOverlay")&&f()})}}function o(t,i){e();n.get(t).done(function(t){n(".dialogOverlay header").html(i);n(".dialogOverlay .content").html(t);u();n(".dialogOverlay").addClass("visible")})}function f(){n(t).one("webkitTransitionEnd mozTransitionEnd MSTransitionEnd oTransitionend transitionend",function(){n(t).remove()}).removeClass("visible")}var r=getUniqueId(),t="#"+r;return n(window).resize(u),{show:o,hide:f}},u=function(t,i){function o(){var e=r.triggerElement.parents().filter(function(){return n(this).css("position")==="fixed"}),t=r.triggerElement.position(),o,i,f,s;e.length>0&&(e.each(function(){t.left+=n(this).position().left;t.top+=n(this).position().top}),u.css("position","fixed"));f=-1;o=r.horizontalPosition==="left"?t.left+4:t.left+r.triggerElement.innerWidth()-u.outerWidth(!0)-4;i=r.verticalPosition==="below"?t.top+r.triggerElement.outerHeight(!0)+4:t.top-u.outerHeight(!0)-4;i<10&&(s=u.outerHeight(!0)+(i<0?i:0),f=n(window).height()-s,i=10);u.css("top",i);u.css("left",o);f>0&&u.css("bottom",f)}function s(){n("#modalOverlay").css("display","block").one(r.downEvent,e);o();u.addClass("visible");document.activeElement!=document.body&&document.activeElement.blur()}function e(){n("#modalOverlay").css("display","none");u.removeClass("visible");u.css("position","")}var u=typeof t=="object"?t:n(t),r={downEvent:"mousedown",verticalPosition:"below",horizontalPosition:"left",triggerElement:n("body"),minWidth:0,minHeight:0,maxWidth:0,maxHeight:0},f;return n.extend(r,i),r.triggerElement=typeof r.triggerElement=="object"?r.triggerElement:n(r.triggerElement),n("#modalOverlay").length===0&&(f=n("<div>").attr("id","modalOverlay"),n("body").append(f)),r.minWidth!==0&&u.css("min-width",r.minWidth),r.minHeight!==0&&u.css("min-height",r.minHeight),r.maxWidth!==0&&u.css("max-width",r.maxWidth),r.maxHeight!==0&&u.css("max-height",r.maxHeight),{show:s,hide:e}};return{dialog:h,loading:s}}(jQuery);